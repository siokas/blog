<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Simple JS Router (with hashes) | Siokas Apostolos</title>
    <meta name="description" content="Web Developer">
    
    
    <link rel="preload" href="/assets/css/0.styles.3da053f5.css" as="style"><link rel="preload" href="/assets/js/app.16acf519.js" as="script"><link rel="preload" href="/assets/js/6.32c1d606.js" as="script"><link rel="prefetch" href="/assets/js/2.f928726d.js"><link rel="prefetch" href="/assets/js/3.016cfcdb.js"><link rel="prefetch" href="/assets/js/4.4dfbf852.js"><link rel="prefetch" href="/assets/js/5.325f3bdd.js"><link rel="prefetch" href="/assets/js/7.08c28e0e.js"><link rel="prefetch" href="/assets/js/8.53304658.js">
    <link rel="stylesheet" href="/assets/css/0.styles.3da053f5.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="container"><div id="head-c"><div class="row"><div class="offset-lg-2 col-lg-8 offset-md-1 col-md-10"><h1 id="blog-name"><a href="/" class="router-link-active">Siokas Apostolos</a></h1> <a href="https://twitter.com/siokas_" target="_blank" class="social"><i class="fa fa-fw fa-twitter"></i></a><a href="https://github.com/siokas" target="_blank" class="social"><i class="fa fa-fw fa-github"></i></a><a href="https://www.linkedin.com/in/siokas" target="_blank" class="social"><i class="fa fa-fw fa-linkedin"></i></a></div></div></div> <div class="row"><div class="offset-lg-2 col-lg-8 offset-md-1 col-md-10"><div><article><p class="post-page-meta">Dec 20, 2017</p> <hr> <div class="content"><img src="/images/router-js.jpg" alt="Simple Router" width="650px"> <h2 id="how-to-write-a-simple-js-router"><a href="#how-to-write-a-simple-js-router" aria-hidden="true" class="header-anchor">#</a> How to write a simple Js Router</h2> <p>Just like the <a href="/dead-simple-php-router">php router</a>, Js Router is also very <strong>VERY</strong> simple. The biggest deal here is that the Js Router runs without reloading the page. To do this we have to use the hased links.</p> <h2 id="step-1-scaffold-an-html-page"><a href="#step-1-scaffold-an-html-page" aria-hidden="true" class="header-anchor">#</a> Step 1. Scaffold an .html page</h2> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype">&lt;!DOCTYPE html&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>utf-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>Simple Js Router<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>#/<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Home<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>#/about<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>About<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>#/contact<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>Contact<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>view<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="step-2-create-the-route-and-router-functions"><a href="#step-2-create-the-route-and-router-functions" aria-hidden="true" class="header-anchor">#</a> Step 2. Create the route() and router() functions</h2> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">var</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">route</span> <span class="token punctuation">(</span><span class="token parameter">path<span class="token punctuation">,</span> template</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    routes<span class="token punctuation">[</span>path<span class="token punctuation">]</span> <span class="token operator">=</span> template<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">router</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> el <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'view'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> url <span class="token operator">=</span> location<span class="token punctuation">.</span>hash<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token string">'/'</span><span class="token punctuation">;</span>
    el<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> routes<span class="token punctuation">[</span>url<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'hashchange'</span><span class="token punctuation">,</span> router<span class="token punctuation">)</span><span class="token punctuation">;</span>
window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'load'</span><span class="token punctuation">,</span> router<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>The route() function pushes the template that we will pass to the routes[] array. In this way if the current path is the same with the path in the routes array, we get the proper template. The router() function is simply changing the innerHTML of the element that we want to change with the template that we passed in the route() method.</p> <p>Finally we have to add an eventListener to listen the load event and the hashchange event, both running -as you guesed- the router() method.</p> <blockquote><p>Write the route() and router() functions in a script in the <code>&lt;head&gt;</code></p></blockquote> <h2 id="step-3-configure-the-routes"><a href="#step-3-configure-the-routes" aria-hidden="true" class="header-anchor">#</a> Step 3. Configure the routes</h2> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">route</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">,</span> <span class="token string">'&lt;h1&gt;Simple Js Router&lt;/h1&gt;'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>So the finall and easiest part of the project is done. Call the pre-defined route method passing as the first argument the path and in the second argument the template casted as string.</p> <p>Examples</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">route</span><span class="token punctuation">(</span><span class="token string">'/about'</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token string">`
    &lt;h1&gt;ABOUT&lt;/h1&gt;
    &lt;p&gt;
        We are ....
    &lt;/p&gt;
    `</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">route</span><span class="token punctuation">(</span><span class="token string">'/contact'</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token string">`
    &lt;h1&gt;Contact Us&lt;/h1&gt;
    &lt;p&gt;
        &lt;ul&gt;
            &lt;li&gt;#fb - @fb.com&lt;/li&gt;
            &lt;li&gt;#tel - 1234567&lt;/li&gt;
        &lt;/ul&gt;
    &lt;/p&gt;
    `</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>Take a look at the hole file in <a href="https://gist.github.com/siokas/7a68723b0ddabcb31806fce46923b67d">this gist</a></p></blockquote></div></article> <!----> <!----></div></div></div> <center><span id="subtitle"><a href="https://siokas.dev" style="color:#54a0ff;text-decoration:none;">siokas.dev</a></span> <div class="row"><div class="offset-lg-2 col-lg-8 offset-md-1 col-md-10"><p class="small">© 2019 <a href="https://siokas.dev">Siokas Apostolos</a> 💻.</p></div></div></center></div></div>
    <script src="/assets/js/app.16acf519.js" defer></script><script src="/assets/js/6.32c1d606.js" defer></script>
  </body>
</html>
